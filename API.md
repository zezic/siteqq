# API docs

## Методы для работы с API

* `POST` - создать
* `PATCH` - обновить
* `GET` - получить
* `DELETE` - удалить

Данные при работе с API передаются в формате JSON. Для доступа к конкретному экземпляру сущности её `id` добавляется в адрес запроса.

## Доступные маршруты

* /api
  * ### /sites
    * `POST` - создать сайт
      * Аргументы:
        * `name` - строка
        * `url` - строка
        * `questions` - массив строк
    * `GET` - получить все сайты
    * `DELETE` - удалить все сайты
  * ### /sites/`<site_id>`
    * `PATCH` - изменить сайт с `id`
      * Аргументы:
        * `name` - строка
        * `url` - строка
        * `questions` - массив строк
    * `GET` - получить сайт по `id`
    * `DELETE` - удалить сайт с `id`
  * ### /sites/`<site_id>`/answer_sets
    * `POST` - создать сет ответов
      * Аргументы:
        * `answers` - массив объектов следующего вида:
        ```json
          {
            "question": "Вопрос, на который отвечают",
            "text": "Текст ответа"
          }
        ```
    * `GET` - получить все сеты ответов для сайта с `id`
    * `DELETE` - удалить все сеты ответов для сайта с `id`
  * ### /sites/`<site_id>`/answer_sets/`<set_id>`
    * `PATCH` - изменить сет ответов с `id`
      * Аргументы:
        * `new` - булево значение
    * `GET` - получить сет ответов по `id`
    * `DELETE` - удалить сет ответов с `id`

## Примеры работы с API

### Создаём сайт
`POST` запрос по адресу **/api/sites**:

```bash
http --json POST http://localhost:7500/api/sites name='Яндекс' url='https://yandex.ru'
```

Ответом будет JSON следующего вида:
```json
{
    "created_at": "2017-09-10T17:52:43.831667+00:00",
    "id": "59b551bb6501740a2112bd1d",
    "name": "Яндекс",
    "new_answers_count": 0,
    "url": "https://yandex.ru"
}
```

### Изменяем созданный сайт с  id `59b551bb6501740a2112bd1d`

`PATCH` запрос по адресу **/api/sites/59b551bb6501740a2112bd1d**:

```bash
http --json POST http://localhost:7500/api/sites/59b551bb6501740a2112bd1d \
  questions:="['Вам понравился наш сайт?', 'Вы придёте к нам ещё?']"
```
